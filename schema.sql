DROP TABLE IF EXISTS timestamps;
DROP TABLE IF EXISTS employee;
DROP TABLE IF EXISTS employees;

CREATE TABLE IF NOT EXISTS employees (
    id        INT           PRIMARY KEY AUTO_INCREMENT,
    fname     VARCHAR(64)   NOT NULL,
    lname     VARCHAR(64)   NOT NULL,
    active    TINYINT(1)    NOT NULL DEFAULT 1,
    address   VARCHAR(255)  NOT NULL,
    hire_date DATETIME      NOT NULL
);

CREATE TABLE IF NOT EXISTS timestamps (
    id          INT         PRIMARY KEY AUTO_INCREMENT,
    employee_id INT         NOT NULL,
    start_time  TIMESTAMP   NOT NULL,
    end_time    TIMESTAMP   NOT NULL,
    action      ENUM('work', 'break') NOT NULL,
    
    FOREIGN KEY (employee_id) REFERENCES employees(id)
);

INSERT INTO employees (fname, lname, active, address, hire_date) VALUES
('John', 'Doe', 1, '123 Main St, Anchorage, AK 99501', '2023-08-15'),
('Alice', 'Smith', 1, '45 Oak Ave, Miami, FL 33101', '2021-04-01'),
('Robert', 'Brown', 0, '789 Pine Ln, Seattle, WA 98104', '2024-01-20');

INSERT IGNORE INTO timestamps (employee_id, start_time, end_time, action) VALUES
(1, '2024-11-12 09:00:00', '2024-11-12 12:00:00', 'work'),
(1, '2024-11-12 12:00:00', '2024-11-12 12:30:00', 'break'),
(1, '2024-11-12 12:30:00', '2024-11-12 17:00:00', 'work'),
(2, '2024-11-12 08:30:00', '2024-11-12 10:00:00', 'work'),
(2, '2024-11-12 10:00:00', '2024-11-12 10:15:00', 'break'),
(2, '2024-11-12 10:15:00', '2024-11-12 13:00:00', 'work'),
(3, '2024-01-25 14:00:00', '2024-01-25 19:00:00', 'work'),

-- Two Weeks Data
(1, '2024-11-13 09:00:00', '2024-11-13 12:00:00', 'work'),
(1, '2024-11-13 12:00:00', '2024-11-13 12:30:00', 'break'),
(1, '2024-11-13 12:30:00', '2024-11-13 17:00:00', 'work'),
(1, '2024-11-14 09:00:00', '2024-11-14 17:00:00', 'work'),
(1, '2024-11-15 09:00:00', '2024-11-15 12:00:00', 'work'),
(1, '2024-11-15 12:00:00', '2024-11-15 13:00:00', 'break'),
(1, '2024-11-15 13:00:00', '2024-11-15 17:00:00', 'work'),
(2, '2024-11-13 08:30:00', '2024-11-13 16:30:00', 'work'),
(2, '2024-11-14 08:30:00', '2024-11-14 12:30:00', 'work'),
(2, '2024-11-14 12:30:00', '2024-11-14 13:00:00', 'break'),
(2, '2024-11-14 13:00:00', '2024-11-14 16:30:00', 'work'),
(2, '2024-11-15 08:30:00', '2024-11-15 16:30:00', 'work'),
(1, '2024-11-18 09:00:00', '2024-11-18 17:00:00', 'work'),
(1, '2024-11-19 09:00:00', '2024-11-19 12:00:00', 'work'),
(1, '2024-11-19 12:00:00', '2024-11-19 13:00:00', 'break'),
(1, '2024-11-19 13:00:00', '2024-11-19 17:00:00', 'work'),
(1, '2024-11-20 09:00:00', '2024-11-20 17:00:00', 'work'),
(1, '2024-11-21 09:00:00', '2024-11-21 12:00:00', 'work'),
(1, '2024-11-21 12:00:00', '2024-11-21 12:30:00', 'break'),
(1, '2024-11-21 12:30:00', '2024-11-21 17:00:00', 'work'),
(1, '2024-11-22 09:00:00', '2024-11-22 17:00:00', 'work'),
(1, '2024-11-25 09:00:00', '2024-11-25 12:00:00', 'work'),
(1, '2024-11-25 12:00:00', '2024-11-25 12:30:00', 'break'),
(1, '2024-11-25 12:30:00', '2024-11-25 17:00:00', 'work'),
(2, '2024-11-18 08:30:00', '2024-11-18 16:30:00', 'work'),
(2, '2024-11-19 08:30:00', '2024-11-19 16:30:00', 'work'),
(2, '2024-11-20 08:30:00', '2024-11-20 12:30:00', 'work'),
(2, '2024-11-20 12:30:00', '2024-11-20 13:00:00', 'break'),
(2, '2024-11-20 13:00:00', '2024-11-20 16:30:00', 'work'),
(2, '2024-11-21 08:30:00', '2024-11-21 16:30:00', 'work'),
(2, '2024-11-22 08:30:00', '2024-11-22 16:30:00', 'work'),
(2, '2024-11-25 08:30:00', '2024-11-25 16:30:00', 'work');

